<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<style>
@media only screen and (max-width: 800px) {
	.less-padding{padding-left:10% !important}
}

</style>
</head>
<body bgcolor="#E9E7F1">


<div align="center" style="padding-top:30px; width:100%">
<span style="font-size:48px; line-height:50px; font-family:Arial, Helvetica, sans-serif, Geneva, sans-serif; font-weight:bold; color: #333333">TO-DO LIST</span>
</div>
<div align="center" width="100%" style="padding-top:60px">
<div style="width:100%; max-width:900px" align="center">
    <div>
    <input type="text" id="inputText" style="width:80%; max-width:500px; display:inline-block"/>
    <input type="button" value="OK" id="addButton" style="display:inline"/>
    </div>

    <div align="center" style="text-align:center">

    <ul id="lista" style="text-align:left; padding-left:22%" class="less-padding">

    </ul>

    </div>
</div>
</div>

<script type="application/javascript">


var button = document.getElementById("addButton");


function item (id, desc){
	  this.id = id;
		this.desc= desc;
		this.checked=false;
};

var lista= (function(){
	var itemsList=[];
  var id = 0;

	return{

		addItem : function(){
			var newItem = new item(id ,document.getElementById('inputText').value);
      if (newItem.desc.length!=0){
				itemsList.push(newItem);
				showList();
				id++;
			}
		},

		removeItem : function(id){
			for (var i=0; i< itemsList.length; i++) {
				if (itemsList[i].id==id){
					itemsList.splice(i, 1);

				}
			}
			showList();
		},

		checkItem : function(id){
			for (var i=0; i< itemsList.length; i++) {
				if (itemsList[i].id==id){
					itemsList[i].checked=true;

				}
			}
			showList();
		},

		uncheckItem : function(id){
			for (var i=0; i< itemsList.length; i++) {
				if (itemsList[i].id==id){
					itemsList[i].checked=false;

				}
			}
			showList();
		},

		checkUncheck : function(id){
			for (var i=0; i< itemsList.length; i++) {
				if (itemsList[i].id==id){
						if(itemsList[i].checked){
							itemsList[i].checked=false;
						}else{
							itemsList[i].checked=true;
						}
				}
			}
			showList();
		},

		returnItems : function(){
			return itemsList;
		}

	}
})();

document.getElementById("inputText").addEventListener("keyup", function(event) {
    event.preventDefault();
    if (event.keyCode == 13) {
        document.getElementById("addButton").click();
    }
});


function showList(){
	var ul = document.getElementById("lista");
	if (ul) {
     while (ul.firstChild) {
       ul.removeChild(ul.firstChild);

		 }
	}
	var texto = document.getElementById("inputText");
  var itemsList = lista.returnItems();

	for (var i=0; i< itemsList.length; i++) {
			var li = document.createElement("li");
			li.setAttribute("id",itemsList[i].id);

			li.appendChild(document.createTextNode(itemsList[i].desc));
			if(itemsList[i].checked){
				li.setAttribute("style", "text-decoration:line-through");
			}

			var check = document.createElement("input");
			check.setAttribute("type","checkbox");
			check.setAttribute("id",itemsList[i].id);
			check.setAttribute("onclick","lista.checkUncheck("+itemsList[i].id+")");
			if (itemsList[i].checked){

				check.setAttribute("checked","true");
			}

			li.appendChild(check);
			/*var buttonCheck = document.createElement("input");
			buttonCheck.setAttribute("type","button");
			buttonCheck.setAttribute("style","margin-left:30px");
			buttonCheck.setAttribute("value","CHECK");
			buttonCheck.setAttribute("id",itemsList[i].id);
			buttonCheck.setAttribute("onclick","lista.checkItem("+itemsList[i].id+")");

			li.appendChild(buttonCheck);

			var buttonUncheck = document.createElement("input");
			buttonUncheck.setAttribute("type","button");
			buttonUncheck.setAttribute("style","margin-left:30px");
			buttonUncheck.setAttribute("value","UNCHECK");
			buttonUncheck.setAttribute("id",itemsList[i].id);
			buttonUncheck.setAttribute("onclick","lista.uncheckItem("+itemsList[i].id+")");

			li.appendChild(buttonUncheck);*/


			var buttonDel = document.createElement("input");
			buttonDel.setAttribute("name","delButton");
			buttonDel.setAttribute("type","button");
			buttonDel.setAttribute("style","margin-left:30px");
			buttonDel.setAttribute("value","DEL");
			buttonDel.setAttribute("id",itemsList[i].id);
			buttonDel.setAttribute("onclick","lista.removeItem("+itemsList[i].id+")");

			li.appendChild(buttonDel);


			ul.appendChild(li);

			texto.value="";
	}
}

button.onclick=lista.addItem;

</script>

</body>
</html>
