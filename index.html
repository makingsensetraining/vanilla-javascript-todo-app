<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">

	<style>
		body {
			background-color: #E9E7F1;
		}

		[name="checkItem"] {
			vertical-align: middle;
		}

		[name="deleteButton"] {
			margin-left: 30px;
			vertical-align: middle;
		}

		#ItemDescription {
			width: 80%;
			display: inline-block;
			margin-right: 15px;
		}

		#addButton {
			display: inline;
			width: 20%;
		}

		.conteiner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 0;
			margin: 0;
			width: 100%;
			max-width: 560px;
			margin: 0 auto;
		}

		.div-description {
			width: 80%;
		}

		.title-conteiner {
			padding-top: 30px;
			width: 100%
		}

		.todolist-conteiner {
			width: 100%;
			padding-top: 60px;
			text-align: center;
		}

		.todolist {
			width: 100%;
			max-width: 900px;
			text-align: center;
			margin: 0 auto;
			display: block;
		}

		.items-conteiner {
			text-align: center;
			width: 100%;
			max-width: 560px;
			text-align: center;
			margin: 0 auto;
		}

		.div-actions {
			width: 20%;
		}

		.title {
			font-size: 48px;
			line-height: 50px;
			font-family: Arial, Helvetica, sans-serif, Geneva, sans-serif;
			font-weight: bold;
			color: #333333;
		}

		.item {
			text-align: left;
		}

		li {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 0;
			margin: 0;
			padding: 16px;
			box-shadow: 0 2px 4px 0 rgba(0, 0, 0, .3);
			background: #fff;
		}

		ul {
			text-align: left;
			padding: 0;
			margin: 0;
			margin-top: 5%;
		}
	</style>
</head>

<body>
	<div align="center" class="title-conteiner">
		<span class="title">TO-DO LIST</span>
	</div>
	<div class="todolist-conteiner">
		<div class="todolist">
			<div class="conteiner">
				<input type="text" id="ItemDescription" />
				<input type="button" value="OK" id="addButton" />
			</div>
			<div class="items-conteiner">
				<ul id="toDoList" class="item">
				</ul>
			</div>
		</div>
	</div>

	<script type="application/javascript">
		var addButtonElement = document.getElementById("addButton");
		var itemDescriptionElement = document.getElementById("ItemDescription");
		var toDoListElement = document.getElementById("toDoList");
		var id = 0;

		function item(id, description) {
			this.id = id;
			this.description = description;
			this.checked = false;
			this.removed = false;
		};

		function createItem(description){
			var newItem = new item(id, itemDescriptionElement.value);
			id++;
			return newItem;
		}

		var toDoList = (function() {
			var itemsList = [];

			return {
				addItem: function(newItem) {
						itemsList[newItem.id] = newItem;
						var itemElement = createItemElement(newItem.id, newItem.description, false);
						toDoListElement.appendChild(itemElement);
						itemDescriptionElement.value = "";
				},

				removeItem: function(id) {
					var itemSelected = document.getElementById("item" + id);
					itemsList[id].removed = true;
					toDoListElement.removeChild(itemSelected);


				},

				checkUncheck: function(id) {
					var itemSelected = document.getElementById("item" + id);


					if (itemsList[id].checked) {
						itemsList[id].checked = false;
						itemSelected.setAttribute("style", "");
					} else {
						itemsList[id].checked = true;
						itemSelected.setAttribute("style", "text-decoration:line-through; color:red");
					}


				},

				returnItems: function() {
					return itemsList;
				}
			}
		})();

		function createItemElement(id, desciption, checked) {
			var itemElement = document.createElement("li");
			itemElement.setAttribute("id", "item" + id);

			var itemDescriptionConteinerElement = document.createElement("div");
			itemDescriptionConteinerElement.setAttribute("class", "div-description")
			itemDescriptionConteinerElement.appendChild(document.createTextNode(desciption));
			itemElement.appendChild(itemDescriptionConteinerElement);

			var actionsConteinerElement = document.createElement("div");
			actionsConteinerElement.setAttribute("class", "div-actions")

			var checkboxElement = document.createElement("input");
			checkboxElement.setAttribute("type", "checkbox");
			checkboxElement.setAttribute("name", "checkItem");
			checkboxElement.setAttribute("id", "checkbox" + id);
			checkboxElement.setAttribute("onclick", "toDoList.checkUncheck(" + id + ")");
			if (checked) {
				itemElement.setAttribute("style", "text-decoration:line-through; color:red");
				checkboxElement.setAttribute("checked", "true");
			}
			actionsConteinerElement.appendChild(checkboxElement);

			var deleteButtonElement = document.createElement("input");
			deleteButtonElement.setAttribute("name", "deleteButton");
			deleteButtonElement.setAttribute("type", "button");
			deleteButtonElement.setAttribute("style", "margin-left:30px");
			deleteButtonElement.setAttribute("value", "DEL");
			deleteButtonElement.setAttribute("id", "deleteButton" + id);
			deleteButtonElement.setAttribute("onclick", "toDoList.removeItem(" + id + ")");
			actionsConteinerElement.appendChild(deleteButtonElement);

			itemElement.appendChild(actionsConteinerElement);

			return itemElement;
		}

		//Add event to Enter key up
		itemDescriptionElement.addEventListener("keyup", function(event) {
			event.preventDefault();
			if (event.keyCode == 13) {
				if (itemDescriptionElement.value.length != 0) {
					var newItem = createItem(itemDescriptionElement.value);
					toDoList.addItem(newItem);
				}
			}
		});

		addButtonElement.addEventListener("click", function(event) {
			event.preventDefault();
			if (itemDescriptionElement.value.length != 0) {
				var newItem = createItem(itemDescriptionElement.value);
				toDoList.addItem(newItem);
			}
		});
	</script>

</body>

</html>
